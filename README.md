# 2020 code craft
## 热身赛

- `warmup.cpp` 

    得分0.4936

## 初赛

- `0419_2.cpp`

    **递归DFS，6+1**

- `0426_multi.cpp`

    **多线程非递归DFS，5+2**

- `0428_4.cpp` (0.3399)

    **(hack data)多线程for循环逆序查找，5+2**

    逆序查找只有一次无效比较并跳出，避免了二分查找第一个大于等于head的节点的步骤。

    for和dfs没有对比测试，虽然直觉上应当for快，但本地for略慢于非递归dfs。

    递归和非递归均没有继续维护。

## 待优化

- 刚改多线程时，收益较低，后续优化之后没有再尝试单线程。

- 逆序查找可能存在较为严重的cache miss，应当逆序排序正向查找。

- 反向2步查找需要排序，优化数据结构，避免排序。

- io姿势似乎不正确，线上io是瓶颈，主要时间在转化字符串，尝试了在多线程找到环之后直接存储为字符串，但线下时间增加了一倍。

- 编译器级别优化，cache优化都没有做很遗憾。

- 最后一天hackdata改动太多，没有开小号，有很多细节可以尝试提交测试速度(队伍总提交次数31次)。

## 总结

主要从开源上进行优化，自己写的算法基本线上被吊打。大佬们复赛加油，期待大佬们开源，学习io操作和毫秒级搜环算法。

- **收获**

    1. 从完全不会c++，至今能熟练的使用STL各种容器，对容器的效率也有一定的理解。

    2. `mmap`，`fwrite/fread`，`write/read`多种io效率。

    3. 合理设计数据结构和算法流程能够减少一些看起来不可避免操作。

    4. 多线程，《c++并发编程》。